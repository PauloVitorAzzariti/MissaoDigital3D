<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Fase 10 - Desvende o Enigma</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600&display=swap" rel="stylesheet">
  <style>
    body {
      background: linear-gradient(to right, #0f2027, #203a43, #2c5364);
      font-family: 'Orbitron', sans-serif;
      color: #fff;
      text-align: center;
    }

    h1 {
      margin-top: 20px;
      font-size: 2.4em;
      color: #00e5ff;
    }

    p {
      font-size: 1.2em;
      padding: 0 20px;
    }

    .slots, .cards {
      display: flex;
      justify-content: center;
      gap: 15px;
      flex-wrap: wrap;
      margin: 30px 0;
    }

    .slot, .card {
      width: 160px;
      height: 80px;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      cursor: pointer;
      transition: 0.3s;
    }

    .slot {
      background: rgba(255, 255, 255, 0.1);
      border: 2px dashed #00e5ff;
      color: #00ffc8;
    }

    .card {
      background: linear-gradient(to bottom, #1de9b6, #00bfa5);
      color: #000;
      box-shadow: 0 0 10px #00e5ff;
    }

    .card:hover {
      transform: scale(1.05);
      background: linear-gradient(to bottom, #64ffda, #00e5ff);
    }

    #feedback {
      font-size: 1.2em;
      color: #ffc107;
    }

    #congrats {
      display: none;
      font-size: 1.5em;
      color: #00ffc8;
      margin-top: 30px;
    }

    .next-btn {
      display: none;
      margin-top: 20px;
      padding: 12px 25px;
      font-size: 1em;
      border: none;
      background: #00e5ff;
      color: #000;
      font-weight: bold;
      border-radius: 10px;
      cursor: pointer;
      box-shadow: 0 0 10px #00e5ff;
    }

    .next-btn:hover {
      background: #64ffda;
    }
  </style>
</head>
<body>
  <h1>üß© Fase 10: Desvende o Enigma Final</h1>
  <p>‚ÄúPara que a luz acenda, algo deve ativar, algo deve controlar, algo deve emitir, e algo deve perceber.‚Äù<br>
  Arraste os itens na ordem correta para ativar o sistema!</p>

  <div class="slots" id="slots">
    <div class="slot" data-pos="0" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
    <div class="slot" data-pos="1" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
    <div class="slot" data-pos="2" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
    <div class="slot" data-pos="3" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
  </div>

  <div class="cards">
    <div class="card" id="btn" draggable="true" ondragstart="drag(event)" data-name="Bot√£o">Bot√£o</div>
    <div class="card" id="led" draggable="true" ondragstart="drag(event)" data-name="LED">LED</div>
    <div class="card" id="res" draggable="true" ondragstart="drag(event)" data-name="Resistor">Resistor</div>
    <div class="card" id="sensor" draggable="true" ondragstart="drag(event)" data-name="Sensor de Luz">Sensor de Luz</div>
  </div>

  <div id="feedback"></div>
  <div id="congrats">üéâ Sistema ativado! Voc√™ completou a jornada!</div>
  <button class="next-btn" onclick="encerramento()">üëâ Encerrar Jornada</button>

  <script>
    const ordemCorreta = ["Bot√£o", "Resistor", "LED", "Sensor de Luz"];

    function allowDrop(ev) {
      ev.preventDefault();
    }

    function drag(ev) {
      ev.dataTransfer.setData("text", ev.target.id);
    }

    function drop(ev) {
      ev.preventDefault();
      const cardId = ev.dataTransfer.getData("text");
      const card = document.getElementById(cardId);
      if (ev.target.classList.contains("slot") && ev.target.children.length === 0) {
        ev.target.appendChild(card);
        verificarOrdem();
      }
    }

    function verificarOrdem() {
      const slots = document.querySelectorAll(".slot");
      let preenchidos = 0;
      let tentativa = [];

      slots.forEach(slot => {
        if (slot.children.length > 0) {
          tentativa.push(slot.children[0].getAttribute("data-name"));
          preenchidos++;
        } else {
          tentativa.push(null);
        }
      });

      if (preenchidos === 4) {
        const certo = tentativa.every((val, idx) => val === ordemCorreta[idx]);
        if (certo) {
          document.getElementById("feedback").innerText = "";
          document.getElementById("congrats").style.display = "block";
          document.querySelector(".next-btn").style.display = "inline-block";
        } else {
          document.getElementById("feedback").innerText = "‚ùå Ordem incorreta. Tente novamente!";
          vibrar();
        }
      }
    }

    function vibrar() {
      if (navigator.vibrate) navigator.vibrate(200);
    }

    function encerramento() {
      window.location.href = "fim.html";
    }
  </script>
</body>
</html>
